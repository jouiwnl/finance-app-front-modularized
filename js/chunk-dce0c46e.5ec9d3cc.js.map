{"version":3,"sources":["webpack:///./src/modules/finder/views/Home.vue?b560","webpack:///./src/modules/finder/views/Home.vue?03d1","webpack:///src/modules/finder/views/Home.vue","webpack:///./src/modules/finder/views/Home.vue?2e79","webpack:///./src/modules/finder/views/Home.vue?614a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","staticClass","_v","partners","model","value","finder","callback","$$v","$set","expression","options","on","$event","executeSearch","_e","loans","length","isLoading","scopedSlots","_u","key","fn","_l","loan","id","loadPartner","contrato","banco","_s","nome","loadLoan","stockId","nroParcela","qtdeParcelas","diasPrimeiraParcela","diasProximaParcela","dataPagamento","vlParcelaJuros","toFixed","vlParcela","balanceAfterPayment","valorTotalJurosLoan","situacao","dataPagamentoPaga","checkLoanForPay","proxy","totalInterests","totalPayments","loansList","bulkPay","staticRenderFns","name","components","ModelListSelect","DatePicker","data","startDate","endDate","situation","partner","created","init","methods","$router","push","some","item","$forceUpdate","checkMoreThanOnePartner","map","nrosParcelas","LoanService","idContrato","newList","component","VAlert","VBtn","VCol","VContainer","VProgressCircular","VRow","VSimpleTable"],"mappings":"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","file":"js/chunk-dce0c46e.5ec9d3cc.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=0edd24dc&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-row',{staticStyle:{\"margin-top\":\"15px\"},attrs:{\"justify\":\"center\"}},[_c('h1',{staticClass:\"mb-3 text-center\"},[_vm._v(\"Find loans\")])]),_c('v-container',{staticClass:\"text-center\"},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"sm\":\"\"}},[_c('span',[_vm._v(\"Partner\")]),_c('model-list-select',{attrs:{\"list\":_vm.partners,\"option-value\":\"nome\",\"option-text\":\"nome\",\"placeholder\":\"select item\"},model:{value:(_vm.finder.partner),callback:function ($$v) {_vm.$set(_vm.finder, \"partner\", $$v)},expression:\"finder.partner\"}})],1),_c('v-col',{attrs:{\"sm\":\"\"}},[_c('span',[_vm._v(\"Situation\")]),_c('model-list-select',{attrs:{\"list\":_vm.options,\"option-value\":\"value\",\"option-text\":\"value\",\"placeholder\":\"select item\"},model:{value:(_vm.finder.situation),callback:function ($$v) {_vm.$set(_vm.finder, \"situation\", $$v)},expression:\"finder.situation\"}})],1),_c('v-col',{attrs:{\"sm\":\"\"}},[_c('span',[_vm._v(\"Start date\")]),_vm._v(\" \"),_c('br'),_c('date-picker',{attrs:{\"valueType\":\"format\"},model:{value:(_vm.finder.startDate),callback:function ($$v) {_vm.$set(_vm.finder, \"startDate\", $$v)},expression:\"finder.startDate\"}})],1),_c('v-col',{attrs:{\"sm\":\"\"}},[_c('span',[_vm._v(\"End date\")]),_vm._v(\" \"),_c('br'),_c('date-picker',{attrs:{\"valueType\":\"format\"},model:{value:(_vm.finder.endDate),callback:function ($$v) {_vm.$set(_vm.finder, \"endDate\", $$v)},expression:\"finder.endDate\"}})],1),_c('v-col',{attrs:{\"sm\":\"1\"}},[_c('v-btn',{staticStyle:{\"margin-top\":\"22px\"},attrs:{\"depressed\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.executeSearch(_vm.finder)}}},[_vm._v(\" Search \")])],1)],1)],1),(_vm.isLoading)?_c('v-row',{staticClass:\"my-12\",attrs:{\"justify\":\"center\",\"no-gutters\":\"\"}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\",\"size\":\"64\"}})],1):_vm._e(),(!_vm.loans.length && !_vm.isLoading)?_c('v-row',{staticClass:\"my-12\",attrs:{\"justify\":\"center\",\"no-gutters\":\"\"}},[_c('v-alert',{attrs:{\"dense\":\"\",\"type\":\"info\"}},[_vm._v(\" Not found any loans with the select filters. \")])],1):_vm._e(),_c('v-row',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"justify\":\"center\"}},[(!_vm.isLoading && _vm.loans.length)?_c('v-simple-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"fixed-header\":\"\",\"height\":\"350px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Partner\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Stock\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"#\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Days\")]),_c('th',{staticClass:\"text-center\",staticStyle:{\"width\":\"120px\"},attrs:{\"scope\":\"col\"}},[_vm._v(\"Due date\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Interest\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Principal\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Payment\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Principal payment\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Principal balance\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Status\")]),_c('th',{staticClass:\"text-center\",staticStyle:{\"width\":\"120px\"},attrs:{\"scope\":\"col\"}},[_vm._v(\"Paid date\")])])]),_c('tbody',_vm._l((_vm.loans),function(loan){return _c('tr',{key:loan.id},[_c('td',{staticClass:\"text-center\"},[_c('a',{on:{\"click\":function($event){return _vm.loadPartner(loan.contrato.banco.id)}}},[_vm._v(_vm._s(loan.contrato.banco.nome))])]),_c('td',{staticClass:\"text-center\"},[_c('a',{on:{\"click\":function($event){return _vm.loadLoan(loan.contrato.id)}}},[_vm._v(_vm._s(loan.contrato.stockId))])]),_c('td',{staticClass:\"text-center\"},[_vm._v(_vm._s(loan.nroParcela)+\"/\"+_vm._s(loan.contrato.qtdeParcelas))]),_c('td',{staticClass:\"text-center\"},[_vm._v(_vm._s(loan.diasPrimeiraParcela ? loan.diasPrimeiraParcela : loan.diasProximaParcela))]),_c('td',{staticClass:\"text-center\"},[_vm._v(_vm._s(loan.dataPagamento))]),_c('td',{staticClass:\"text-center\"},[_vm._v(\"$\"+_vm._s(loan.vlParcelaJuros.toFixed(2)))]),_c('td',{staticClass:\"text-center\"},[_vm._v(\"$\"+_vm._s((loan.vlParcela + (loan.balanceAfterPayment - loan.valorTotalJurosLoan)).toFixed(2)))]),_c('td',{staticClass:\"text-center\"},[_vm._v(\"$\"+_vm._s(loan.vlParcela.toFixed(2)))]),_c('td',{staticClass:\"text-center\"},[_vm._v(\"$\"+_vm._s((loan.vlParcela - loan.vlParcelaJuros).toFixed(2)))]),_c('td',{staticClass:\"text-center\"},[_vm._v(\"$\"+_vm._s((loan.balanceAfterPayment - loan.valorTotalJurosLoan).toFixed(2)))]),_c('td',{staticClass:\"text-center\"},[_vm._v(_vm._s(loan.situacao))]),_c('td',{staticClass:\"text-center\"},[_vm._v(\" \"+_vm._s(loan.dataPagamentoPaga)+\" \"),(loan.situacao != 'PAID' && loan.situacao != 'DEACTIVADED')?_c('span',[_c('input',{attrs:{\"type\":\"checkbox\"},on:{\"click\":function($event){return _vm.checkLoanForPay(loan)}}}),_vm._v(\" Pay \")]):_vm._e()])])}),0)]},proxy:true}],null,false,2909992226)}):_vm._e(),(_vm.loans.length && !_vm.isLoading)?_c('v-row',{staticStyle:{\"margin-top\":\"5px\"},attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"sm\":\"3\"}},[_c('strong',[_vm._v(\"Total Loans: \")]),_vm._v(\" \"+_vm._s(_vm.loans.length)+\" \")]),_c('v-col',{attrs:{\"sm\":\"3\"}},[_c('strong',[_vm._v(\"Total Interest: \")]),_vm._v(\" $\"+_vm._s(_vm.totalInterests.toFixed(2))+\" \")]),_c('v-col',{attrs:{\"sm\":\"3\"}},[_c('strong',[_vm._v(\"Total Payments: \")]),_vm._v(\" $\"+_vm._s(_vm.totalPayments.toFixed(2))+\" \")]),(_vm.loansList.length)?_c('v-col',{attrs:{\"sm\":\"1\"}},[_c('v-btn',{attrs:{\"depressed\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.bulkPay(_vm.loansList)}}},[_vm._v(\" Bulk pay \")])],1):_vm._e()],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-row justify=\"center\" style=\"margin-top: 15px;\">\n      <h1 class=\"mb-3 text-center\">Find loans</h1>\n    </v-row>\n\n    <v-container class=\"text-center\">\n      <v-row align=\"center\" justify=\"center\">\n        <v-col sm>\n          <span>Partner</span>\n          <model-list-select :list=\"partners\"\n                      v-model=\"finder.partner\"\n                      option-value=\"nome\"\n                      option-text=\"nome\"\n                      placeholder=\"select item\">\n          </model-list-select>\n        </v-col>\n        \n        <v-col sm>\n          <span>Situation</span>\n          <model-list-select :list=\"options\"\n                      v-model=\"finder.situation\"\n                      option-value=\"value\"\n                      option-text=\"value\"\n                      placeholder=\"select item\">\n          </model-list-select>\n        </v-col>\n\n        <v-col sm>\n          <span>Start date</span> <br>\n          <date-picker v-model=\"finder.startDate\" valueType=\"format\"></date-picker>\n        </v-col>\n\n        <v-col sm>\n          <span>End date</span> <br>\n          <date-picker v-model=\"finder.endDate\" valueType=\"format\"></date-picker>\n        </v-col>\n\n        <v-col sm=\"1\">\n          <v-btn style=\"margin-top: 22px;\" depressed color=\"primary\" v-on:click=\"executeSearch(finder)\">\n            Search\n          </v-btn>\n        </v-col> \n      </v-row>\n    </v-container>\n    \n    <v-row v-if=\"isLoading\" justify=\"center\" no-gutters class=\"my-12\">\n      <v-progress-circular indeterminate color=\"primary\" size=\"64\" />\n    </v-row>\n\n    <v-row v-if=\"!loans.length && !isLoading\" justify=\"center\" no-gutters class=\"my-12\">\n      <v-alert dense type=\"info\">\n        Not found any loans with the select filters.\n      </v-alert>\n    </v-row>\n\n    <v-row justify=\"center\" style=\"margin-top: 10px;\">\n      <v-simple-table\n        fixed-header\n        height=\"350px\"\n        v-if=\"!isLoading && loans.length\"\n        style=\"width: 100%;\"\n      >\n        <template v-slot:default>\n          <thead>\n            <tr>\n              <th scope=\"col\" class=\"text-center\">Partner</th>\n              <th scope=\"col\" class=\"text-center\">Stock</th>\n              <th scope=\"col\" class=\"text-center\">#</th>\n              <th scope=\"col\" class=\"text-center\">Days</th>\n              <th scope=\"col\" class=\"text-center\" style=\"width: 120px;\">Due date</th>\n              <th scope=\"col\" class=\"text-center\">Interest</th>\n              <th scope=\"col\" class=\"text-center\">Principal</th>\n              <th scope=\"col\" class=\"text-center\">Payment</th>\n              <th scope=\"col\" class=\"text-center\">Principal payment</th>\n              <th scope=\"col\" class=\"text-center\">Principal balance</th>\n              <th scope=\"col\" class=\"text-center\">Status</th>\n              <th scope=\"col\" class=\"text-center\" style=\"width: 120px;\">Paid date</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              v-for=\"loan in loans\"\n              :key=\"loan.id\"\n            >\n              <td class=\"text-center\"><a v-on:click=\"loadPartner(loan.contrato.banco.id)\">{{ loan.contrato.banco.nome }}</a></td>\n              <td class=\"text-center\"><a v-on:click=\"loadLoan(loan.contrato.id)\">{{ loan.contrato.stockId }}</a></td>\n              <td class=\"text-center\">{{ loan.nroParcela }}/{{ loan.contrato.qtdeParcelas }}</td>\n              <td class=\"text-center\">{{ loan.diasPrimeiraParcela ? loan.diasPrimeiraParcela : loan.diasProximaParcela }}</td>\n              <td class=\"text-center\">{{ loan.dataPagamento }}</td>\n              <td class=\"text-center\">${{ loan.vlParcelaJuros.toFixed(2) }}</td>\n              <td class=\"text-center\">${{(loan.vlParcela + (loan.balanceAfterPayment - loan.valorTotalJurosLoan)).toFixed(2)}}</td>\n              <td class=\"text-center\">${{loan.vlParcela.toFixed(2)}}</td>\n              <td class=\"text-center\">${{ (loan.vlParcela - loan.vlParcelaJuros).toFixed(2)}}</td>\n              <td class=\"text-center\">${{ (loan.balanceAfterPayment - loan.valorTotalJurosLoan).toFixed(2)}}</td>\n              <td class=\"text-center\">{{loan.situacao}}</td>\n              <td class=\"text-center\">\n                  {{loan.dataPagamentoPaga}}\n                  <span v-if=\"loan.situacao != 'PAID' && loan.situacao != 'DEACTIVADED'\">\n                      <input type=\"checkbox\" v-on:click=\"checkLoanForPay(loan)\">\n                      Pay\n                  </span>\n              </td>\n            </tr>\n          </tbody>\n        </template>\n      </v-simple-table>\n      <v-row style=\"margin-top: 5px;\" align=\"center\" justify=\"center\" v-if=\"loans.length && !isLoading\">\n        <v-col sm=\"3\">\n          <strong>Total Loans: </strong> {{loans.length}}\n        </v-col>\n\n        <v-col sm=\"3\">\n          <strong>Total Interest: </strong> ${{totalInterests.toFixed(2)}}\n        </v-col>\n\n        <v-col sm=\"3\">\n          <strong>Total Payments: </strong> ${{totalPayments.toFixed(2)}}\n        </v-col>\n        \n        <v-col sm=\"1\" v-if=\"loansList.length\">\n          <v-btn depressed color=\"primary\" v-on:click=\"bulkPay(loansList)\">\n            Bulk pay\n          </v-btn>\n        </v-col>  \n      </v-row>\n    </v-row>\n    \n  </div>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { ModelListSelect } from 'vue-search-select';\nimport DatePicker from 'vue2-datepicker';\nimport ParcelaService from \"../services/ParcelaService\";\nimport PartnerService from \"../../partners/services/PartnerService\";\nimport _ from 'lodash';\nimport LoanService from '../../loans/services/LoanService';\nimport CreateToast from '../../../utils/createToast';\n\nexport default {\n  name: \"Home\",\n  components: {\n    ModelListSelect,\n    DatePicker\n  },\n  data: () => ({\n    loans: [],\n    partners: [{ nome: 'All' }],\n    partner: {},\n    finder: { \n        startDate: moment().format('YYYY-MM-DD'), \n        endDate: moment().format('YYYY-MM-DD'),\n        situation: \"All\",\n        partner: \"All\"\n    },\n    isLoading: false,\n    options: [\n      { id: 1, value: 'All' },\n      { id: 2, value: 'UNPAID' },\n      { id: 3, value: 'PAID' },\n      { id: 4, value: 'DEACTIVADED' }\n    ],\n    loansList: [],\n    totalPayments: 0.0,\n    totalInterests: 0.0\n  }),\n  created() {\n    this.init()\n  },\n\n  methods: {\n    async init() {\n      this.isLoading = true;\n      this.loans = [];\n      this.partners = [{ nome: 'All' }];\n      PartnerService.findAll().then(response => {\n        response.data.map(result => {\n          this.partners.push(result);\n        });\n        this.partners = this.partners.filter(partner => partner.situacao != 'DEACTIVADED').sort();\n      }).catch(err => {\n        CreateToast.createToastFailed('An error ocurred! Please try again!');\n      }).finally(() => {\n        this.isLoading = false;\n      });\n    },\n\n    async executeSearch(finder) {\n      this.isLoading = true;\n      ParcelaService.buscaAvancada(\n          finder.partner, \n          finder.situation, \n          finder.startDate, \n          finder.endDate\n      ).then((response) => {\n          this.loans = response.data;\n          this.totalPayments = _.sumBy(this.loans, 'vlParcela');\n          this.totalInterests = _.sumBy(this.loans, 'vlParcelaJuros')\n      }).finally(() => {\n          this.isLoading = false;\n      }); \n    },\n\n    loadPartner(idBanco) {\n      this.$router.push(`/partners/${idBanco}`);\n    },\n\n    loadLoan(idLoan) {\n      this.$router.push(`/loans/${idLoan}`);\n    },\n\n    checkLoanForPay(loan) {\n      if (this.loansList.some(value => value.id == loan.id)) {\n        _.remove(this.loansList, (item) => {\n          return item.id == loan.id\n        });\n\n        this.$forceUpdate(this.loansList);\n      } else {\n        this.loansList.push(loan);\n      }\n    },\n\n    bulkPay(loansList) {\n      if (this.checkMoreThanOnePartner(loansList)) {\n        this.isLoading = true;\n        CreateToast.createToastInfo('Payment in process!', 'Sending emails to partners to verify your paid loans.');\n\n        let nrosParcelas = [];\n\n        loansList.map(loan => {\n          nrosParcelas.push(loan.nroParcela);\n        })\n        \n        LoanService.pay(loansList[0].contrato.id, nrosParcelas).then(response => {\n          CreateToast.createToastSuccess('Payments processed with success.');\n        }).then(() => {\n          this.init();\n        }).catch(err => {\n          CreateToast.createToastFailed('An error ocurred! Please try again!');\n        }).finally(() => {\n          this.isLoading = false;\n        });\n\n        this.$forceUpdate(this.loans);\n        this.$forceUpdate(this.partners);\n      }\n    },\n\n    checkMoreThanOnePartner(loanList) {\n      let newList = _.uniqBy(loanList, (loan) => {\n        return loan.idContrato;\n      });\n\n      if (newList.length > 1) {\n        CreateToast.createToastWarning(`It's not possible pay two different partners at the same time. Please, use filters to find and pay separately!`);\n        return false;\n      }\n\n      return true;\n    }\n  }\n};\n</script>\n\n<style scoped>\n  a {\n    text-decoration: none;\n  }\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=0edd24dc&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=0edd24dc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0edd24dc\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\ninstallComponents(component, {VAlert,VBtn,VCol,VContainer,VProgressCircular,VRow,VSimpleTable})\n"],"sourceRoot":""}